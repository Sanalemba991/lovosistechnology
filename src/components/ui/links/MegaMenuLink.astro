---
// Astro frontmatter
import { Image } from "astro:assets";
import Icon from "../icons/Icon.astro";
import personWorking from "@images/person-working.avif";
---

<div
  class="hs-dropdown [--adaptive:none] [--strategy:static] md:[--strategy:absolute] md:[--trigger:hover]"
>
  <button
    type="button"
    class="flex w-full items-center text-gray-700 font-semibold hover:text-blue-600 dark:text-gray-300 dark:hover:text-blue-600 transition-colors duration-300"
  >
    Solutions
    <svg
      xmlns="http://www.w3.org/2000/svg"
      fill="none"
      viewBox="0 0 24 24"
      stroke-width="1.5"
      stroke="currentColor"
      class="ms-2 size-4 flex-shrink-0 transition-transform duration-300 group-hover:rotate-180"
    >
      <path
        stroke-linecap="round"
        stroke-linejoin="round"
        d="m19.5 8.25-7.5 7.5-7.5-7.5"
      />
    </svg>
  </button>

  <div
    class="hs-dropdown-menu start-0 top-full z-10 hidden w-full min-w-60 rounded-2xl bg-neutral-50 py-2 opacity-0 transform transition-all duration-300 ease-in-out before:absolute before:-top-5 before:start-0 before:h-5 before:w-full hs-dropdown-open:opacity-100 hs-dropdown-open:translate-y-0 translate-y-5 dark:divide-neutral-700 dark:bg-neutral-800 md:top-16 md:p-4 md:shadow-2xl"
  >
    <div class="gap-4 items-center grid grid-cols-1 sm:grid-cols-1 md:grid-cols-1 lg:grid-cols-1">
      <div class="mx-1 flex flex-wrap gap-3 md:mx-0">
        <!-- Surveillance -->
        <a
          class="group flex gap-x-5 rounded-lg p-4 hover:bg-neutral-100 dark:text-neutral-200 dark:hover:bg-neutral-500/10 transition-all duration-300 w-full md:w-auto"
          href="/surveillance"
          onmouseover="updateDetails('/pictures/surveillance.webp', 'Surveillance Solution')"
        >
          <div class="w-20 md:w-38 flex-shrink-0">
            <img
              src="/pictures/surveillance.webp"
              alt="Surveillance Solution"
              class="w-full h-auto object-contain max-h-10"
            />
          </div>
          <div class="grow">
            <p class="font-medium text-neutral-800 dark:text-neutral-200">
              Surveillance Solution
            </p>
            <p
              class="mt-3 inline-flex items-center gap-x-1 text-sm font-medium text-blue-600 decoration-2 hover:underline dark:text-teal-600"
            >
              Learn more
              <Icon
                name="arrowRight"
                class="transition-transform duration-300 group-hover:translate-x-1"
              />
            </p>
          </div>
        </a>
      
        <!-- IT -->
        <a
          class="group flex gap-x-5 rounded-lg p-4 hover:bg-neutral-100 dark:text-neutral-200 dark:hover:bg-neutral-500/10 transition-all duration-300 w-full md:w-auto"
          href="/IT"
          onmouseover="updateDetails('/pictures/it.webp', 'IT Solution')"
        >
          <div class="w-20 md:w-38 flex-shrink-0">
            <img
              src="/pictures/it.webp"
              alt="IT Solution"
              class="w-full h-auto object-contain max-h-10"
            />
          </div>
          <div class="grow">
            <p class="font-medium text-neutral-800 dark:text-neutral-200">
              IT Solution
            </p>
            <p
              class="mt-3 inline-flex items-center gap-x-1 text-sm font-medium text-blue-600 decoration-2 hover:underline dark:text-teal-600"
            >
              Learn more
              <Icon
                name="arrowRight"
                class="transition-transform duration-300 group-hover:translate-x-1"
              />
            </p>
          </div>
        </a>
      
        <!-- Careers -->
        <a
          class="group flex gap-x-5 rounded-lg p-4 hover:bg-neutral-100 dark:text-neutral-200 dark:hover:bg-neutral-500/10 transition-all duration-300 w-full md:w-auto"
          href="/careers"
          onmouseover="updateDetails('/pictures/carrers.webp', 'Careers')"
        >
          <div class="w-20 md:w-38 flex-shrink-0">
            <img
              src="/pictures/carrers.webp"
              alt="Careers"
              class="w-full h-auto object-contain max-h-10"
            />
          </div>
          <div class="grow">
            <p class="font-medium text-neutral-800 dark:text-neutral-200">
              Careers
            </p>
            <p
              class="mt-3 inline-flex items-center gap-x-1 text-sm font-medium text-blue-600 decoration-2 hover:underline dark:text-teal-600"
            >
              Learn more
              <Icon
                name="arrowRight"
                class="transition-transform duration-300 group-hover:translate-x-1"
              />
            </p>
          </div>
        </a>
      </div>
    </div>
  </div>
</div>

<script is:inline>
  function updateDetails(newSrc, newTitle) {
    const img = document.getElementById("solution-img");
    const title = document.getElementById("solution-title");
    if (img && title) {
      img.classList.add("opacity-0");
      setTimeout(() => {
        img.src = newSrc;
        title.textContent = newTitle;
        img.classList.remove("opacity-0");
      }, 150);
    }
  }

  document.addEventListener("DOMContentLoaded", function () {
    const dropdownItems = document.querySelectorAll(".hs-dropdown");
    dropdownItems.forEach((item) => {
      const button = item.querySelector("button");
      const menu = item.querySelector(".hs-dropdown-menu");
      const svg = button?.querySelector("svg");

      if (button && menu) {
        menu.style.transition = "opacity 300ms ease-in-out, transform 300ms ease-in-out";

        if (window.innerWidth >= 768) {
          button.addEventListener("mouseenter", () => {
            svg?.classList.add("rotate-180");
          });

          item.addEventListener("mouseleave", () => {
            svg?.classList.remove("rotate-180");
          });
        }
      }
    });
  });
</script>

<style is:global>
  .hs-dropdown-open {
    transition: all 0.3s ease-in-out;
  }

  #solution-img {
    transition: opacity 0.3s ease-in-out;
  }

  .hs-dropdown-menu {
    transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out;
  }

  .hs-dropdown button svg {
    transition: transform 0.3s ease;
  }

  a,
  button,
  .group {
    transition: all 0.3s ease;
  }

  a img {
    transition: transform 0.3s ease;
  }

  a:hover img {
    transform: scale(1.05);
  }
</style>
